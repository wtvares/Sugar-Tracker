(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{7295:function(e,t,n){Promise.resolve().then(n.bind(n,1856))},1856:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(7437),i=n(2265),s=n(6023);function a(){let[e,t]=(0,i.useState)(!1),[n,a]=(0,i.useState)(15),[l,c]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=s.K.getPrefs();t(e.remindersEnabled),a(e.checkInHour),c(e.name||"")},[]);let o=e=>{let t=new FileReader;t.onload=()=>{try{s.K.importAll(t.result),alert("Import complete. Refresh the page to see updates.")}catch(e){alert("Invalid file")}},t.readAsText(e)};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"section space-y-3",children:[(0,r.jsx)("div",{className:"section-title",children:"Preferences"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label",children:"Your name (optional)"}),(0,r.jsx)("input",{className:"input",value:l,onChange:e=>c(e.target.value),placeholder:"Helps personalize messages"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label",children:"Daily check-in reminder"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:e,onChange:e=>t(e.target.checked)})," Enable reminders"]}),(0,r.jsx)("select",{className:"select max-w-[120px]",value:n,onChange:e=>a(parseInt(e.target.value)),children:Array.from({length:24},(e,t)=>t).map(e=>(0,r.jsxs)("option",{value:e,children:[e.toString().padStart(2,"0"),":00"]},e))})]}),(0,r.jsx)("p",{className:"text-xs text-warmgray-600 mt-1",children:"Browser notifications require permission and may only fire while the app is open."})]}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>{s.K.setPrefs({remindersEnabled:e,checkInHour:n,name:l}),e&&"Notification"in window&&Notification.requestPermission(),alert("Preferences saved")},children:"Save Preferences"})]}),(0,r.jsxs)("div",{className:"section space-y-3",children:[(0,r.jsx)("div",{className:"section-title",children:"Data"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{className:"btn btn-ghost",onClick:()=>{let e=new Blob([s.K.exportAll()],{type:"application/json"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="cravings_data.json",n.click(),URL.revokeObjectURL(t)},children:"Export JSON"}),(0,r.jsxs)("label",{className:"btn btn-ghost",children:[(0,r.jsx)("input",{type:"file",accept:"application/json",className:"hidden",onChange:e=>e.target.files&&o(e.target.files[0])})," Import JSON"]})]})]})]})}},8278:function(e,t,n){"use strict";n.d(t,{Gs:function(){return r},Vn:function(){return i},vV:function(){return a},zJ:function(){return s}});let r=()=>new Date().toISOString().slice(0,10),i=e=>e.toISOString().slice(0,10),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=(t.getDay()+6)%7;return t.setDate(t.getDate()-n),t.setHours(0,0,0,0),t},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=s(e),n=new Date(t);return n.setDate(t.getDate()+6),n}},6023:function(e,t,n){"use strict";n.d(t,{K:function(){return u}});var r=n(9360);let i=()=>(0,r.Z)();var s=n(8278);let a="ct_daily",l="ct_weekly",c="ct_prefs";function o(e,t){try{let n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(e){return t}}function d(e,t){localStorage.setItem(e,JSON.stringify(t))}let u={listDaily:()=>o(a,[]).sort((e,t)=>e.date.localeCompare(t.date)),getDaily(e){return this.listDaily().find(t=>t.id===e)},upsertDaily(e){let t;let n=this.listDaily();if(e.id){var r;t={...e,createdAt:null!==(r=e.createdAt)&&void 0!==r?r:new Date().toISOString()};let i=n.findIndex(t=>t.id===e.id);i>=0?n[i]=t:n.push(t)}else t={...e,id:i(),createdAt:new Date().toISOString()},n.push(t);return d(a,n),t},todayDaily(){let e=(0,s.Gs)();return this.listDaily().find(t=>t.date===e)},listWeekly:()=>o(l,[]).sort((e,t)=>e.weekStart.localeCompare(t.weekStart)),getWeekly(e){return this.listWeekly().find(t=>t.id===e)},upsertWeekly(e){let t;let n=this.listWeekly();if(e.id){var r;t={...e,createdAt:null!==(r=e.createdAt)&&void 0!==r?r:new Date().toISOString()};let i=n.findIndex(t=>t.id===e.id);i>=0?n[i]=t:n.push(t)}else t={...e,id:i(),createdAt:new Date().toISOString()},n.push(t);return d(l,n),t},getPrefs:()=>o(c,{remindersEnabled:!1,checkInHour:15}),setPrefs(e){d(c,e)},exportAll(){return JSON.stringify({daily:this.listDaily(),weekly:this.listWeekly(),prefs:this.getPrefs()},null,2)},importAll(e){let t=JSON.parse(e);t.daily&&d(a,t.daily),t.weekly&&d(l,t.weekly),t.prefs&&d(c,t.prefs)}}},9360:function(e,t,n){"use strict";let r;n.d(t,{Z:function(){return l}});var i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let s=new Uint8Array(16),a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));var l=function(e,t,n){if(i.randomUUID&&!t&&!e)return i.randomUUID();let l=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)})();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=l[e];return t}return function(e,t=0){return a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]}(l)}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7295)}),_N_E=e.O()}]);