(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[534],{554:function(e,t,n){Promise.resolve().then(n.bind(n,5830))},5830:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n(7437),a=n(9501),l=n(7119),i=n(3590),r=n(9376),c=n(6023),o=n(8278);let d=l.Ry({weekStart:l.Z_(),weekEnd:l.Z_(),strongCravings:l.oQ.number().min(0),avgIntensity:l.oQ.number().min(0).max(10),commonEmotion:l.Z_().max(50),daysWithSnack:l.oQ.number().min(0).max(7),wins:l.Z_().max(1e3).optional().default(""),challenges:l.Z_().max(1e3).optional().default(""),insights:l.Z_().max(1e3).optional().default(""),adjustment:l.Z_().max(1e3).optional().default("")});function u(){let e=(0,r.useRouter)(),t=(0,o.Vn)((0,o.zJ)()),n=(0,o.Vn)((0,o.vV)()),{register:l,handleSubmit:u}=(0,a.cI)({resolver:(0,i.F)(d),defaultValues:{weekStart:t,weekEnd:n,strongCravings:0,avgIntensity:0,commonEmotion:"Neutral",daysWithSnack:0}});return(0,s.jsx)("form",{onSubmit:u(t=>{var n,s,a,l;c.K.upsertWeekly({id:void 0,weekStart:t.weekStart,weekEnd:t.weekEnd,strongCravings:t.strongCravings,avgIntensity:t.avgIntensity,commonEmotion:t.commonEmotion,daysWithSnack:t.daysWithSnack,wins:null!==(n=t.wins)&&void 0!==n?n:"",challenges:null!==(s=t.challenges)&&void 0!==s?s:"",insights:null!==(a=t.insights)&&void 0!==a?a:"",adjustment:null!==(l=t.adjustment)&&void 0!==l?l:""}),e.push("/")}),className:"space-y-4",children:(0,s.jsxs)("div",{className:"section space-y-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Week start"}),(0,s.jsx)("input",{type:"date",className:"input",...l("weekStart")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Week end"}),(0,s.jsx)("input",{type:"date",className:"input",...l("weekEnd")})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Number of strong cravings"}),(0,s.jsx)("input",{type:"number",className:"input",min:0,...l("strongCravings")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Average craving intensity (0–10)"}),(0,s.jsx)("input",{type:"number",className:"input",min:0,max:10,step:.1,...l("avgIntensity")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Most common emotion"}),(0,s.jsx)("select",{className:"select",...l("commonEmotion"),children:["Calm","Content","Neutral","Stressed","Anxious","Sad","Irritable","Tired","Other"].map(e=>(0,s.jsx)("option",{children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Days with afternoon snack (0–7)"}),(0,s.jsx)("input",{type:"number",className:"input",min:0,max:7,...l("daysWithSnack")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Weekly wins"}),(0,s.jsx)("textarea",{className:"textarea",rows:3,placeholder:"What went well?",...l("wins")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Challenges"}),(0,s.jsx)("textarea",{className:"textarea",rows:3,placeholder:"What was tough?",...l("challenges")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Insights"}),(0,s.jsx)("textarea",{className:"textarea",rows:3,placeholder:"What did you notice?",...l("insights")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Adjustment for next week"}),(0,s.jsx)("textarea",{className:"textarea",rows:3,placeholder:"A gentle plan or experiment",...l("adjustment")})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"btn btn-secondary",type:"submit",children:"Save Weekly Reflection"}),(0,s.jsx)("button",{className:"btn btn-ghost",type:"button",onClick:()=>history.back(),children:"Cancel"})]})]})})}},8278:function(e,t,n){"use strict";n.d(t,{Gs:function(){return s},Vn:function(){return a},vV:function(){return i},zJ:function(){return l}});let s=()=>new Date().toISOString().slice(0,10),a=e=>e.toISOString().slice(0,10),l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=(t.getDay()+6)%7;return t.setDate(t.getDate()-n),t.setHours(0,0,0,0),t},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=l(e),n=new Date(t);return n.setDate(t.getDate()+6),n}},6023:function(e,t,n){"use strict";n.d(t,{K:function(){return u}});var s=n(9360);let a=()=>(0,s.Z)();var l=n(8278);let i="ct_daily",r="ct_weekly",c="ct_prefs";function o(e,t){try{let n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(e){return t}}function d(e,t){localStorage.setItem(e,JSON.stringify(t))}let u={listDaily:()=>o(i,[]).sort((e,t)=>e.date.localeCompare(t.date)),getDaily(e){return this.listDaily().find(t=>t.id===e)},upsertDaily(e){let t;let n=this.listDaily();if(e.id){var s;t={...e,createdAt:null!==(s=e.createdAt)&&void 0!==s?s:new Date().toISOString()};let a=n.findIndex(t=>t.id===e.id);a>=0?n[a]=t:n.push(t)}else t={...e,id:a(),createdAt:new Date().toISOString()},n.push(t);return d(i,n),t},todayDaily(){let e=(0,l.Gs)();return this.listDaily().find(t=>t.date===e)},listWeekly:()=>o(r,[]).sort((e,t)=>e.weekStart.localeCompare(t.weekStart)),getWeekly(e){return this.listWeekly().find(t=>t.id===e)},upsertWeekly(e){let t;let n=this.listWeekly();if(e.id){var s;t={...e,createdAt:null!==(s=e.createdAt)&&void 0!==s?s:new Date().toISOString()};let a=n.findIndex(t=>t.id===e.id);a>=0?n[a]=t:n.push(t)}else t={...e,id:a(),createdAt:new Date().toISOString()},n.push(t);return d(r,n),t},getPrefs:()=>o(c,{remindersEnabled:!1,checkInHour:15}),setPrefs(e){d(c,e)},exportAll(){return JSON.stringify({daily:this.listDaily(),weekly:this.listWeekly(),prefs:this.getPrefs()},null,2)},importAll(e){let t=JSON.parse(e);t.daily&&d(i,t.daily),t.weekly&&d(r,t.weekly),t.prefs&&d(c,t.prefs)}}}},function(e){e.O(0,[752,971,117,744],function(){return e(e.s=554)}),_N_E=e.O()}]);