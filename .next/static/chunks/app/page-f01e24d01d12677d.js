(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{254:function(e,t,s){Promise.resolve().then(s.bind(s,9757))},9757:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var l=s(7437),a=s(7648);function n(e){let{title:t,value:s,hint:a}=e;return(0,l.jsxs)("div",{className:"section",children:[(0,l.jsx)("div",{className:"text-sm text-warmgray-600",children:t}),(0,l.jsx)("div",{className:"text-2xl font-semibold mt-1",children:s}),a&&(0,l.jsx)("div",{className:"text-xs text-warmgray-500 mt-1",children:a})]})}var i=s(6023),r=s(4084),c=s(6705);function d(e){let{labels:t,data:s,label:a}=e;return(0,l.jsx)("div",{className:"section",children:(0,l.jsx)(c.x1,{data:{labels:t,datasets:[{label:a,data:s,borderColor:"#8b7fc0",backgroundColor:"rgba(139,127,192,0.2)",tension:.3}]},options:{responsive:!0,plugins:{legend:{display:!1}}}})})}function o(e){let{labels:t,data:s,label:a}=e;return(0,l.jsx)("div",{className:"section",children:(0,l.jsx)(c.$Q,{data:{labels:t,datasets:[{label:a,data:s,backgroundColor:"#3dbb8d"}]},options:{responsive:!0,plugins:{legend:{display:!1}}}})})}function u(e){let{labels:t,data:s}=e;return(0,l.jsx)("div",{className:"section",children:(0,l.jsx)(c.by,{data:{labels:t,datasets:[{data:s,backgroundColor:["#8b7fc0","#3dbb8d","#b2aa98","#a59ad0","#5fcea4","#cec8bc","#7669ab"].slice(0,s.length)}]},options:{responsive:!0}})})}function f(){let e=i.K.listDaily(),t=i.K.todayDaily(),s=function(e,t){let s=new Map;e.forEach(e=>s.set(e.date,e));let l=[],a=[],n=[],i=[],r=new Date;for(let e=6;e>=0;e--){var c,d;let t=new Date(r);t.setDate(r.getDate()-e);let o=t.toISOString().slice(0,10);l.push(o);let u=s.get(o);a.push(null!==(c=null==u?void 0:u.cravingIntensity)&&void 0!==c?c:0),n.push(null!==(d=null==u?void 0:u.stressLevel)&&void 0!==d?d:0),i.push((null==u?void 0:u.afternoonSnack)?1:0)}return{labels:l,intensity:a,stress:n,snack:i}}(e,0),r=function(e){if(!e.length)return 0;let t=new Set(e.map(e=>e.date)),s=0,l=new Date;for(;t.has(l.toISOString().slice(0,10));)s++,l.setDate(l.getDate()-1);return s}(e),c=function(e){let t={};for(let s of e)for(let e of s.reasons)t[e]=(t[e]||0)+1;return t}(e),f=function(e){let t={};for(let s of e)t[s.feelAfter]=(t[s.feelAfter]||0)+1;return t}(e),h=e=>e.length?(e.reduce((e,t)=>e+t,0)/e.length).toFixed(1):"0";return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"section flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-warmgray-600",children:"Today"}),(0,l.jsx)("div",{className:"text-lg font-semibold",children:t?"Check-in complete":"No check-in yet"})]}),(0,l.jsx)(a.default,{href:"/daily/new",className:"btn btn-primary",children:"Start Daily Check-In"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,l.jsx)(n,{title:"7-day avg intensity",value:h(s.intensity)}),(0,l.jsx)(n,{title:"7-day avg stress",value:h(s.stress)}),(0,l.jsx)(n,{title:"Snack days (7d)",value:s.snack.reduce((e,t)=>e+t,0)}),(0,l.jsx)(n,{title:"Streak",value:r,hint:"consecutive days with check-ins"})]}),(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsx)(d,{labels:s.labels,data:s.intensity,label:"Craving intensity"}),(0,l.jsx)(d,{labels:s.labels,data:s.stress,label:"Stress level"}),(0,l.jsx)(o,{labels:s.labels,data:s.snack,label:"Afternoon snack (1=yes)"}),Object.keys(c).length>0&&(0,l.jsx)(u,{labels:Object.keys(c),data:Object.values(c)}),Object.keys(f).length>0&&(0,l.jsx)(u,{labels:Object.keys(f),data:Object.values(f)})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"section",children:[(0,l.jsx)("div",{className:"section-title",children:"Daily History"}),(0,l.jsxs)("div",{className:"mt-2",children:[e.slice().reverse().slice(0,5).map(e=>(0,l.jsxs)(a.default,{href:"/daily/".concat(e.id),className:"flex justify-between py-2 border-b border-warmgray-100 last:border-0",children:[(0,l.jsx)("span",{children:e.date}),(0,l.jsxs)("span",{className:"text-sm text-warmgray-600",children:["int ",e.cravingIntensity," / stress ",e.stressLevel]})]},e.id)),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(a.default,{className:"text-sm text-lavender-700 hover:underline",href:"/daily/history",children:"View all"})})]})]}),(0,l.jsxs)("div",{className:"section",children:[(0,l.jsx)("div",{className:"section-title",children:"Weekly Reflections"}),(0,l.jsxs)("div",{className:"mt-2",children:[i.K.listWeekly().slice().reverse().slice(0,5).map(e=>(0,l.jsxs)(a.default,{href:"/weekly/".concat(e.id),className:"flex justify-between py-2 border-b border-warmgray-100 last:border-0",children:[(0,l.jsxs)("span",{children:[e.weekStart," â†’ ",e.weekEnd]}),(0,l.jsxs)("span",{className:"text-sm text-warmgray-600",children:["avg ",e.avgIntensity]})]},e.id)),(0,l.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,l.jsx)(a.default,{href:"/weekly/new",className:"btn btn-secondary",children:"New Weekly Reflection"}),(0,l.jsx)(a.default,{href:"/weekly/history",className:"btn btn-ghost",children:"View all"})]})]})]})]})]})}r.kL.register(r.uw,r.f$,r.od,r.jn,r.ZL,r.qi,r.u,r.De)},8278:function(e,t,s){"use strict";s.d(t,{Gs:function(){return l},Vn:function(){return a},vV:function(){return i},zJ:function(){return n}});let l=()=>new Date().toISOString().slice(0,10),a=e=>e.toISOString().slice(0,10),n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),s=(t.getDay()+6)%7;return t.setDate(t.getDate()-s),t.setHours(0,0,0,0),t},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=n(e),s=new Date(t);return s.setDate(t.getDate()+6),s}},6023:function(e,t,s){"use strict";s.d(t,{K:function(){return u}});var l=s(9360);let a=()=>(0,l.Z)();var n=s(8278);let i="ct_daily",r="ct_weekly",c="ct_prefs";function d(e,t){try{let s=localStorage.getItem(e);return s?JSON.parse(s):t}catch(e){return t}}function o(e,t){localStorage.setItem(e,JSON.stringify(t))}let u={listDaily:()=>d(i,[]).sort((e,t)=>e.date.localeCompare(t.date)),getDaily(e){return this.listDaily().find(t=>t.id===e)},upsertDaily(e){let t;let s=this.listDaily();if(e.id){var l;t={...e,createdAt:null!==(l=e.createdAt)&&void 0!==l?l:new Date().toISOString()};let a=s.findIndex(t=>t.id===e.id);a>=0?s[a]=t:s.push(t)}else t={...e,id:a(),createdAt:new Date().toISOString()},s.push(t);return o(i,s),t},todayDaily(){let e=(0,n.Gs)();return this.listDaily().find(t=>t.date===e)},listWeekly:()=>d(r,[]).sort((e,t)=>e.weekStart.localeCompare(t.weekStart)),getWeekly(e){return this.listWeekly().find(t=>t.id===e)},upsertWeekly(e){let t;let s=this.listWeekly();if(e.id){var l;t={...e,createdAt:null!==(l=e.createdAt)&&void 0!==l?l:new Date().toISOString()};let a=s.findIndex(t=>t.id===e.id);a>=0?s[a]=t:s.push(t)}else t={...e,id:a(),createdAt:new Date().toISOString()},s.push(t);return o(r,s),t},getPrefs:()=>d(c,{remindersEnabled:!1,checkInHour:15}),setPrefs(e){o(c,e)},exportAll(){return JSON.stringify({daily:this.listDaily(),weekly:this.listWeekly(),prefs:this.getPrefs()},null,2)},importAll(e){let t=JSON.parse(e);t.daily&&o(i,t.daily),t.weekly&&o(r,t.weekly),t.prefs&&o(c,t.prefs)}}}},function(e){e.O(0,[674,648,480,971,117,744],function(){return e(e.s=254)}),_N_E=e.O()}]);